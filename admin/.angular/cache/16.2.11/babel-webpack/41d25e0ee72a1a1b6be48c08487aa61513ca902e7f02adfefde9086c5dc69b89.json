{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"../services/initial-config.service\";\nimport * as i3 from \"@angular/router\";\nclass AdminExistenceAndLoginGuard {\n  constructor(authService, initialConfigService, router) {\n    this.authService = authService;\n    this.initialConfigService = initialConfigService;\n    this.router = router;\n  }\n  canActivate() {\n    const setupRequired = this.initialConfigService.getSetupRequiredSync();\n    if (setupRequired === null) {\n      // Si no se ha determinado aún, redirige a una página de carga o similar\n      return this.router.createUrlTree(['/loading']);\n    } else if (setupRequired) {\n      // Si 'setupRequired' es true, redirige a la configuración inicial\n      return this.router.createUrlTree(['/auth/initial-setup']);\n    } else {\n      // Si 'setupRequired' es false, verifica si el usuario está autenticado\n      if (this.authService.isAuthenticated(['MasterAdministrator'])) {\n        return true;\n      } else {\n        // Si el usuario no está autenticado, redirige al login\n        return this.router.createUrlTree(['/auth/login']);\n      }\n    }\n  }\n  static #_ = this.ɵfac = function AdminExistenceAndLoginGuard_Factory(t) {\n    return new (t || AdminExistenceAndLoginGuard)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.InitialConfigService), i0.ɵɵinject(i3.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AdminExistenceAndLoginGuard,\n    factory: AdminExistenceAndLoginGuard.ɵfac,\n    providedIn: 'root'\n  });\n}\nexport { AdminExistenceAndLoginGuard };","map":{"version":3,"names":["AdminExistenceAndLoginGuard","constructor","authService","initialConfigService","router","canActivate","setupRequired","getSetupRequiredSync","createUrlTree","isAuthenticated","_","i0","ɵɵinject","i1","AuthService","i2","InitialConfigService","i3","Router","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Javier\\Documents\\proyectos\\e-commerce\\admin\\src\\app\\core\\guards\\is-logged-in.guard.ts"],"sourcesContent":["//is-logged-in.guard.ts\n\n// import { Injectable } from '@angular/core';\n// import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\n// import { AuthService } from '../services/auth.service';\n\n// @Injectable({\n//   providedIn: 'root'\n// })\n\n// export class isLoggedInGuard implements CanActivate {\n\n//   constructor(\n//     private authService: AuthService,\n//     private router: Router\n//   ) { }\n\n//   canActivate(\n//     next: ActivatedRouteSnapshot,\n//     state: RouterStateSnapshot): boolean | UrlTree {\n//     // Verifica si el usuario está autenticado o tiene los permisos necesarios para acceder a las rutas del LayoutModule\n//     if (this.authService.isAuthenticated(['MasterAdministrator'])) {\n//       return true;\n//     } else {\n//       // Si el usuario no está autenticado, redirige a la página de inicio de sesión o a la página que desees.\n//       return this.router.createUrlTree(['/auth/login']);\n//     }\n//   }\n// }\n\nimport { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\nimport { InitialConfigService } from '../services/initial-config.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AdminExistenceAndLoginGuard implements CanActivate {\n  constructor(\n    private authService: AuthService,\n    private initialConfigService: InitialConfigService,\n    private router: Router\n  ) { }\n\n  canActivate(): boolean | UrlTree {\n    const setupRequired = this.initialConfigService.getSetupRequiredSync();\n\n    if (setupRequired === null) {\n      // Si no se ha determinado aún, redirige a una página de carga o similar\n      return this.router.createUrlTree(['/loading']);\n    } else if (setupRequired) {\n      // Si 'setupRequired' es true, redirige a la configuración inicial\n      return this.router.createUrlTree(['/auth/initial-setup']);\n    } else {\n      // Si 'setupRequired' es false, verifica si el usuario está autenticado\n      if (this.authService.isAuthenticated(['MasterAdministrator'])) {\n        return true;\n      } else {\n        // Si el usuario no está autenticado, redirige al login\n        return this.router.createUrlTree(['/auth/login']);\n      }\n    }\n  }\n}\n\n"],"mappings":";;;;AAmCA,MAGaA,2BAA2B;EACtCC,YACUC,WAAwB,EACxBC,oBAA0C,EAC1CC,MAAc;IAFd,KAAAF,WAAW,GAAXA,WAAW;IACX,KAAAC,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAC,MAAM,GAANA,MAAM;EACZ;EAEJC,WAAWA,CAAA;IACT,MAAMC,aAAa,GAAG,IAAI,CAACH,oBAAoB,CAACI,oBAAoB,EAAE;IAEtE,IAAID,aAAa,KAAK,IAAI,EAAE;MAC1B;MACA,OAAO,IAAI,CAACF,MAAM,CAACI,aAAa,CAAC,CAAC,UAAU,CAAC,CAAC;KAC/C,MAAM,IAAIF,aAAa,EAAE;MACxB;MACA,OAAO,IAAI,CAACF,MAAM,CAACI,aAAa,CAAC,CAAC,qBAAqB,CAAC,CAAC;KAC1D,MAAM;MACL;MACA,IAAI,IAAI,CAACN,WAAW,CAACO,eAAe,CAAC,CAAC,qBAAqB,CAAC,CAAC,EAAE;QAC7D,OAAO,IAAI;OACZ,MAAM;QACL;QACA,OAAO,IAAI,CAACL,MAAM,CAACI,aAAa,CAAC,CAAC,aAAa,CAAC,CAAC;;;EAGvD;EAAC,QAAAE,CAAA,G;qBAzBUV,2BAA2B,EAAAW,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,oBAAA,GAAAL,EAAA,CAAAC,QAAA,CAAAK,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;WAA3BnB,2BAA2B;IAAAoB,OAAA,EAA3BpB,2BAA2B,CAAAqB,IAAA;IAAAC,UAAA,EAF1B;EAAM;;SAEPtB,2BAA2B"},"metadata":{},"sourceType":"module","externalDependencies":[]}