{"ast":null,"code":"import { of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"../services/initial-config.service\";\nimport * as i3 from \"@angular/router\";\nclass isLoggedInGuard {\n  constructor(authService, initialConfigService, router) {\n    this.authService = authService;\n    this.initialConfigService = initialConfigService;\n    this.router = router;\n  }\n  canActivate() {\n    return this.initialConfigService.InitialCheck().pipe(switchMap(adminExists => {\n      console.log(\"ðŸš€ ~ isLoggedInGuard ~ canActivate ~ adminExists:\", adminExists);\n      if (!adminExists) {\n        this.router.navigate(['/initial-config']);\n        return of(false);\n      } else {\n        if (this.authService.isAuthenticated(['MasterAdministrator'])) {\n          return of(true);\n        } else {\n          this.router.navigate(['/auth/login']);\n          return of(false);\n        }\n      }\n    }));\n  }\n  static #_ = this.Éµfac = function isLoggedInGuard_Factory(t) {\n    return new (t || isLoggedInGuard)(i0.ÉµÉµinject(i1.AuthService), i0.ÉµÉµinject(i2.InitialConfigService), i0.ÉµÉµinject(i3.Router));\n  };\n  static #_2 = this.Éµprov = /*@__PURE__*/i0.ÉµÉµdefineInjectable({\n    token: isLoggedInGuard,\n    factory: isLoggedInGuard.Éµfac,\n    providedIn: 'root'\n  });\n}\nexport { isLoggedInGuard };","map":{"version":3,"names":["of","switchMap","isLoggedInGuard","constructor","authService","initialConfigService","router","canActivate","InitialCheck","pipe","adminExists","console","log","navigate","isAuthenticated","_","i0","ÉµÉµinject","i1","AuthService","i2","InitialConfigService","i3","Router","_2","factory","Éµfac","providedIn"],"sources":["C:\\Users\\Javier\\Documents\\proyectos\\e-commerce\\admin\\src\\app\\core\\guards\\is-logged-in.guard.ts"],"sourcesContent":["//is-logged-in.guard.ts\n\n// import { Injectable } from '@angular/core';\n// import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\n// import { AuthService } from '../services/auth.service';\n\n// @Injectable({\n//   providedIn: 'root'\n// })\n\n// export class isLoggedInGuard implements CanActivate {\n\n//   constructor(\n//     private authService: AuthService,\n//     private router: Router\n//   ) { }\n\n//   canActivate(\n//     next: ActivatedRouteSnapshot,\n//     state: RouterStateSnapshot): boolean | UrlTree {\n//     // Verifica si el usuario estÃ¡ autenticado o tiene los permisos necesarios para acceder a las rutas del LayoutModule\n//     if (this.authService.isAuthenticated(['MasterAdministrator'])) {\n//       return true;\n//     } else {\n//       // Si el usuario no estÃ¡ autenticado, redirige a la pÃ¡gina de inicio de sesiÃ³n o a la pÃ¡gina que desees.\n//       return this.router.createUrlTree(['/auth/login']);\n//     }\n//   }\n// }\n\nimport { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { AuthService } from '../services/auth.service';\nimport { InitialConfigService } from '../services/initial-config.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class isLoggedInGuard implements CanActivate {\n  constructor(\n    private authService: AuthService,\n    private initialConfigService: InitialConfigService,\n    private router: Router\n  ) { }\n\n  canActivate(): Observable<boolean> {\n    return this.initialConfigService.InitialCheck().pipe(\n      switchMap(adminExists => {\n        console.log(\"ðŸš€ ~ isLoggedInGuard ~ canActivate ~ adminExists:\", adminExists)\n\n        if (!adminExists) {\n          this.router.navigate(['/initial-config']);\n          return of(false);\n        } else {\n          if (this.authService.isAuthenticated(['MasterAdministrator'])) {\n            return of(true);\n          } else {\n            this.router.navigate(['/auth/login']);\n            return of(false);\n          }\n        }\n      })\n    );\n  }\n}\n"],"mappings":"AAgCA,SAAqBA,EAAE,QAAQ,MAAM;AACrC,SAASC,SAAS,QAAQ,gBAAgB;;;;;AAI1C,MAGaC,eAAe;EAC1BC,YACUC,WAAwB,EACxBC,oBAA0C,EAC1CC,MAAc;IAFd,KAAAF,WAAW,GAAXA,WAAW;IACX,KAAAC,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAC,MAAM,GAANA,MAAM;EACZ;EAEJC,WAAWA,CAAA;IACT,OAAO,IAAI,CAACF,oBAAoB,CAACG,YAAY,EAAE,CAACC,IAAI,CAClDR,SAAS,CAACS,WAAW,IAAG;MACtBC,OAAO,CAACC,GAAG,CAAC,mDAAmD,EAAEF,WAAW,CAAC;MAE7E,IAAI,CAACA,WAAW,EAAE;QAChB,IAAI,CAACJ,MAAM,CAACO,QAAQ,CAAC,CAAC,iBAAiB,CAAC,CAAC;QACzC,OAAOb,EAAE,CAAC,KAAK,CAAC;OACjB,MAAM;QACL,IAAI,IAAI,CAACI,WAAW,CAACU,eAAe,CAAC,CAAC,qBAAqB,CAAC,CAAC,EAAE;UAC7D,OAAOd,EAAE,CAAC,IAAI,CAAC;SAChB,MAAM;UACL,IAAI,CAACM,MAAM,CAACO,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;UACrC,OAAOb,EAAE,CAAC,KAAK,CAAC;;;IAGtB,CAAC,CAAC,CACH;EACH;EAAC,QAAAe,CAAA,G;qBAzBUb,eAAe,EAAAc,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,oBAAA,GAAAL,EAAA,CAAAC,QAAA,CAAAK,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAftB,eAAe;IAAAuB,OAAA,EAAfvB,eAAe,CAAAwB,IAAA;IAAAC,UAAA,EAFd;EAAM;;SAEPzB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}